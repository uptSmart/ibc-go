"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6303],{3905:(e,t,i)=>{i.d(t,{Zo:()=>h,kt:()=>u});var n=i(67294);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}var s=n.createContext({}),d=function(e){var t=n.useContext(s),i=t;return e&&(i="function"==typeof e?e(t):r(r({},t),e)),i},h=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var i=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,h=l(e,["components","mdxType","originalType","parentName"]),c=d(i),m=a,u=c["".concat(s,".").concat(m)]||c[m]||p[m]||o;return i?n.createElement(u,r(r({ref:t},h),{},{components:i})):n.createElement(u,r({ref:t},h))}));function u(e,t){var i=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=i.length,r=new Array(o);r[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[c]="string"==typeof e?e:a,r[1]=l;for(var d=2;d<o;d++)r[d]=i[d];return n.createElement.apply(null,r)}return n.createElement.apply(null,i)}m.displayName="MDXCreateElement"},74743:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>s,contentTitle:()=>r,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var n=i(87462),a=(i(67294),i(3905));const o={title:"Client State interface",sidebar_label:"Client State interface",sidebar_position:2,slug:"/ibc/light-clients/client-state"},r="Implementing the ClientState interface",l={unversionedId:"light-clients/developer-guide/client-state",id:"light-clients/developer-guide/client-state",title:"Client State interface",description:"Learn how to implement the ClientState interface. This list of methods described here does not include all methods of the interface. Some methods are explained in detail in the relevant sections of the guide.",source:"@site/docs/03-light-clients/01-developer-guide/02-client-state.md",sourceDirName:"03-light-clients/01-developer-guide",slug:"/ibc/light-clients/client-state",permalink:"/main/ibc/light-clients/client-state",draft:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Client State interface",sidebar_label:"Client State interface",sidebar_position:2,slug:"/ibc/light-clients/client-state"},sidebar:"defaultSidebar",previous:{title:"Overview",permalink:"/main/ibc/light-clients/overview"},next:{title:"Consensus State interface",permalink:"/main/ibc/light-clients/consensus-state"}},s={},d=[{value:"<code>ClientType</code> method",id:"clienttype-method",level:2},{value:"<code>GetLatestHeight</code> method",id:"getlatestheight-method",level:2},{value:"<code>Validate</code> method",id:"validate-method",level:2},{value:"<code>Status</code> method",id:"status-method",level:2},{value:"<code>ZeroCustomFields</code> method",id:"zerocustomfields-method",level:2},{value:"<code>GetTimestampAtHeight</code> method",id:"gettimestampatheight-method",level:2},{value:"<code>Initialize</code> method",id:"initialize-method",level:2},{value:"<code>VerifyMembership</code> method",id:"verifymembership-method",level:2},{value:"<code>VerifyNonMembership</code> method",id:"verifynonmembership-method",level:2},{value:"<code>VerifyClientMessage</code> method",id:"verifyclientmessage-method",level:2},{value:"<code>CheckForMisbehaviour</code> method",id:"checkformisbehaviour-method",level:2}],h={toc:d},c="wrapper";function p(e){let{components:t,...i}=e;return(0,a.kt)(c,(0,n.Z)({},h,i,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"implementing-the-clientstate-interface"},"Implementing the ",(0,a.kt)("inlineCode",{parentName:"h1"},"ClientState")," interface"),(0,a.kt)("p",null,"Learn how to implement the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/cosmos/ibc-go/blob/v7.0.0/modules/core/exported/client.go#L36"},(0,a.kt)("inlineCode",{parentName:"a"},"ClientState"))," interface. This list of methods described here does not include all methods of the interface. Some methods are explained in detail in the relevant sections of the guide."),(0,a.kt)("h2",{id:"clienttype-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"ClientType")," method"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ClientType")," should return a unique string identifier of the light client. This will be used when generating a client identifier.\nThe format is created as follows: ",(0,a.kt)("inlineCode",{parentName:"p"},"ClientType-{N}")," where ",(0,a.kt)("inlineCode",{parentName:"p"},"{N}")," is the unique global nonce associated with a specific client."),(0,a.kt)("h2",{id:"getlatestheight-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"GetLatestHeight")," method"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"GetLatestHeight")," should return the latest block height that the client state represents."),(0,a.kt)("h2",{id:"validate-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"Validate")," method"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Validate")," should validate every client state field and should return an error if any value is invalid. The light client\nimplementer is in charge of determining which checks are required. See the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/cosmos/ibc-go/blob/v7.0.0/modules/light-clients/07-tendermint/client_state.go#L111"},"Tendermint light client implementation")," as a reference."),(0,a.kt)("h2",{id:"status-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"Status")," method"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Status")," must return the status of the client."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"An ",(0,a.kt)("inlineCode",{parentName:"li"},"Active")," status indicates that clients are allowed to process packets."),(0,a.kt)("li",{parentName:"ul"},"A ",(0,a.kt)("inlineCode",{parentName:"li"},"Frozen")," status indicates that misbehaviour was detected in the counterparty chain and the client is not allowed to be used."),(0,a.kt)("li",{parentName:"ul"},"An ",(0,a.kt)("inlineCode",{parentName:"li"},"Expired")," status indicates that a client is not allowed to be used because it was not updated for longer than the trusting period."),(0,a.kt)("li",{parentName:"ul"},"An ",(0,a.kt)("inlineCode",{parentName:"li"},"Unknown")," status indicates that there was an error in determining the status of a client.")),(0,a.kt)("p",null,"All possible ",(0,a.kt)("inlineCode",{parentName:"p"},"Status")," types can be found ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/cosmos/ibc-go/blob/v7.0.0/modules/core/exported/client.go#L22-L32"},"here"),"."),(0,a.kt)("p",null,"This field is returned in the response of the gRPC ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/cosmos/ibc-go/blob/v7.0.0/modules/core/02-client/types/query.pb.go#L665"},(0,a.kt)("inlineCode",{parentName:"a"},"ibc.core.client.v1.Query/ClientStatus"))," endpoint."),(0,a.kt)("h2",{id:"zerocustomfields-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"ZeroCustomFields")," method"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ZeroCustomFields")," should return a copy of the light client with all client customizable fields with their zero value. It should not mutate the fields of the light client.\nThis method is used when ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/cosmos/ibc-go/blob/v7.0.0/modules/core/02-client/keeper/proposal.go#L82"},"scheduling upgrades"),". Upgrades are used to upgrade chain specific fields.\nIn the tendermint case, this may be the chain ID or the unbonding period.\nFor more information about client upgrades see the ",(0,a.kt)("a",{parentName:"p",href:"/main/ibc/light-clients/upgrades"},"Handling upgrades")," section."),(0,a.kt)("h2",{id:"gettimestampatheight-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"GetTimestampAtHeight")," method"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"GetTimestampAtHeight")," must return the timestamp for the consensus state associated with the provided height.\nThis value is used to facilitate timeouts by checking the packet timeout timestamp against the returned value."),(0,a.kt)("h2",{id:"initialize-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"Initialize")," method"),(0,a.kt)("p",null,"Clients must validate the initial consensus state, and set the initial client state and consensus state in the provided client store.\nClients may also store any necessary client-specific metadata."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Initialize")," is called when a ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/cosmos/ibc-go/blob/v7.0.0/modules/core/02-client/keeper/client.go#L30"},"client is created"),"."),(0,a.kt)("h2",{id:"verifymembership-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"VerifyMembership")," method"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"VerifyMembership")," must verify the existence of a value at a given commitment path at the specified height. For more information about membership proofs\nsee the ",(0,a.kt)("a",{parentName:"p",href:"/main/ibc/light-clients/proofs"},"Existence and non-existence proofs section"),"."),(0,a.kt)("h2",{id:"verifynonmembership-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"VerifyNonMembership")," method"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"VerifyNonMembership")," must verify the absence of a value at a given commitment path at a specified height. For more information about non-membership proofs\nsee the ",(0,a.kt)("a",{parentName:"p",href:"/main/ibc/light-clients/proofs"},"Existence and non-existence proofs section"),"."),(0,a.kt)("h2",{id:"verifyclientmessage-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"VerifyClientMessage")," method"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"VerifyClientMessage")," must verify a ",(0,a.kt)("inlineCode",{parentName:"p"},"ClientMessage"),". A ",(0,a.kt)("inlineCode",{parentName:"p"},"ClientMessage")," could be a ",(0,a.kt)("inlineCode",{parentName:"p"},"Header"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"Misbehaviour"),", or batch update.\nIt must handle each type of ",(0,a.kt)("inlineCode",{parentName:"p"},"ClientMessage")," appropriately. Calls to ",(0,a.kt)("inlineCode",{parentName:"p"},"CheckForMisbehaviour"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"UpdateState"),", and ",(0,a.kt)("inlineCode",{parentName:"p"},"UpdateStateOnMisbehaviour"),"\nwill assume that the content of the ",(0,a.kt)("inlineCode",{parentName:"p"},"ClientMessage")," has been verified and can be trusted. An error should be returned\nif the ClientMessage fails to verify."),(0,a.kt)("h2",{id:"checkformisbehaviour-method"},(0,a.kt)("inlineCode",{parentName:"h2"},"CheckForMisbehaviour")," method"),(0,a.kt)("p",null,"Checks for evidence of a misbehaviour in ",(0,a.kt)("inlineCode",{parentName:"p"},"Header")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"Misbehaviour")," type. It assumes the ",(0,a.kt)("inlineCode",{parentName:"p"},"ClientMessage"),"\nhas already been verified."))}p.isMDXComponent=!0}}]);